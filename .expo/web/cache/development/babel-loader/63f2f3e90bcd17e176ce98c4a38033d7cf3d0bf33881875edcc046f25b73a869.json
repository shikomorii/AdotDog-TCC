{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport { isObject } from '@react-native-firebase/app/lib/common';\nimport FirestoreDocumentReference from \"./FirestoreDocumentReference\";\nimport FirestoreDocumentSnapshot from \"./FirestoreDocumentSnapshot\";\nimport { parseSetOptions, parseUpdateArgs } from \"./utils\";\nimport { buildNativeMap } from \"./utils/serialize\";\nvar FirestoreTransaction = function () {\n  function FirestoreTransaction(firestore, meta) {\n    _classCallCheck(this, FirestoreTransaction);\n    this._firestore = firestore;\n    this._meta = meta;\n  }\n  _createClass(FirestoreTransaction, [{\n    key: \"_prepare\",\n    value: function _prepare() {\n      this._calledGetCount = 0;\n      this._commandBuffer = [];\n      this._pendingResult = undefined;\n    }\n  }, {\n    key: \"get\",\n    value: function get(documentRef) {\n      var _this = this;\n      if (!(documentRef instanceof FirestoreDocumentReference)) {\n        throw new Error(\"firebase.firestore().runTransaction() Transaction.get(*) 'documentRef' expected a DocumentReference.\");\n      }\n      this._calledGetCount++;\n      return this._firestore.native.transactionGetDocument(this._meta.id, documentRef.path).then(function (data) {\n        return new FirestoreDocumentSnapshot(_this._firestore, data);\n      });\n    }\n  }, {\n    key: \"set\",\n    value: function set(documentRef, data, options) {\n      if (!(documentRef instanceof FirestoreDocumentReference)) {\n        throw new Error(\"firebase.firestore().runTransaction() Transaction.set(*) 'documentRef' expected a DocumentReference.\");\n      }\n      if (!isObject(data)) {\n        throw new Error(\"firebase.firestore().runTransaction() Transaction.set(_, *) 'data' must be an object..\");\n      }\n      var setOptions;\n      try {\n        setOptions = parseSetOptions(options);\n      } catch (e) {\n        throw new Error(\"firebase.firestore().runTransaction() Transaction.set(_, _, *) \" + e.message + \".\");\n      }\n      this._commandBuffer.push({\n        type: 'SET',\n        path: documentRef.path,\n        data: buildNativeMap(data, this._firestore._settings.ignoreUndefinedProperties),\n        options: setOptions\n      });\n      return this;\n    }\n  }, {\n    key: \"update\",\n    value: function update(documentRef) {\n      if (!(documentRef instanceof FirestoreDocumentReference)) {\n        throw new Error(\"firebase.firestore().runTransaction() Transaction.update(*) 'documentRef' expected a DocumentReference.\");\n      }\n      var data;\n      try {\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n        data = parseUpdateArgs(args);\n      } catch (e) {\n        throw new Error(\"firebase.firestore().runTransaction() Transaction.update(_, *) \" + e.message);\n      }\n      this._commandBuffer.push({\n        type: 'UPDATE',\n        path: documentRef.path,\n        data: buildNativeMap(data, this._firestore._settings.ignoreUndefinedProperties)\n      });\n      return this;\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(documentRef) {\n      if (!(documentRef instanceof FirestoreDocumentReference)) {\n        throw new Error(\"firebase.firestore().runTransaction() Transaction.delete(*) 'documentRef' expected a DocumentReference.\");\n      }\n      this._commandBuffer.push({\n        type: 'DELETE',\n        path: documentRef.path\n      });\n      return this;\n    }\n  }]);\n  return FirestoreTransaction;\n}();\nexport { FirestoreTransaction as default };","map":{"version":3,"names":["isObject","FirestoreDocumentReference","FirestoreDocumentSnapshot","parseSetOptions","parseUpdateArgs","buildNativeMap","FirestoreTransaction","firestore","meta","_classCallCheck","_firestore","_meta","_createClass","key","value","_prepare","_calledGetCount","_commandBuffer","_pendingResult","undefined","get","documentRef","_this","Error","native","transactionGetDocument","id","path","then","data","set","options","setOptions","e","message","push","type","_settings","ignoreUndefinedProperties","update","_len","arguments","length","args","Array","_key","_delete","default"],"sources":["C:/Users/filipe.225221/Downloads/projeto-mari (1)/projeto-mari/adotdogggg/node_modules/@react-native-firebase/firestore/lib/FirestoreTransaction.js"],"sourcesContent":["/*\n * Copyright (c) 2016-present Invertase Limited & Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this library except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { isObject } from '@react-native-firebase/app/lib/common';\nimport FirestoreDocumentReference from './FirestoreDocumentReference';\nimport FirestoreDocumentSnapshot from './FirestoreDocumentSnapshot';\nimport { parseSetOptions, parseUpdateArgs } from './utils';\nimport { buildNativeMap } from './utils/serialize';\n\nexport default class FirestoreTransaction {\n  constructor(firestore, meta) {\n    this._firestore = firestore;\n    this._meta = meta;\n  }\n\n  /**\n   * Clears the command buffer and any pending result in prep for\n   * the next transaction iteration attempt.\n   *\n   * @private\n   */\n  _prepare() {\n    this._calledGetCount = 0;\n    this._commandBuffer = [];\n    this._pendingResult = undefined;\n  }\n\n  /**\n   * Reads the document referenced by the provided DocumentReference.\n   */\n  get(documentRef) {\n    if (!(documentRef instanceof FirestoreDocumentReference)) {\n      throw new Error(\n        \"firebase.firestore().runTransaction() Transaction.get(*) 'documentRef' expected a DocumentReference.\",\n      );\n    }\n\n    this._calledGetCount++;\n    return this._firestore.native\n      .transactionGetDocument(this._meta.id, documentRef.path)\n      .then(data => new FirestoreDocumentSnapshot(this._firestore, data));\n  }\n\n  /**\n   * Writes to the document referred to by the provided DocumentReference.\n   * If the document does not exist yet, it will be created. If you pass options,\n   * the provided data can be merged into the existing document.\n   */\n  set(documentRef, data, options) {\n    if (!(documentRef instanceof FirestoreDocumentReference)) {\n      throw new Error(\n        \"firebase.firestore().runTransaction() Transaction.set(*) 'documentRef' expected a DocumentReference.\",\n      );\n    }\n\n    if (!isObject(data)) {\n      throw new Error(\n        \"firebase.firestore().runTransaction() Transaction.set(_, *) 'data' must be an object..\",\n      );\n    }\n\n    let setOptions;\n    try {\n      setOptions = parseSetOptions(options);\n    } catch (e) {\n      throw new Error(\n        `firebase.firestore().runTransaction() Transaction.set(_, _, *) ${e.message}.`,\n      );\n    }\n\n    this._commandBuffer.push({\n      type: 'SET',\n      path: documentRef.path,\n      data: buildNativeMap(data, this._firestore._settings.ignoreUndefinedProperties),\n      options: setOptions,\n    });\n\n    return this;\n  }\n\n  update(documentRef, ...args) {\n    if (!(documentRef instanceof FirestoreDocumentReference)) {\n      throw new Error(\n        \"firebase.firestore().runTransaction() Transaction.update(*) 'documentRef' expected a DocumentReference.\",\n      );\n    }\n\n    let data;\n    try {\n      data = parseUpdateArgs(args);\n    } catch (e) {\n      throw new Error(\n        `firebase.firestore().runTransaction() Transaction.update(_, *) ${e.message}`,\n      );\n    }\n\n    this._commandBuffer.push({\n      type: 'UPDATE',\n      path: documentRef.path,\n      data: buildNativeMap(data, this._firestore._settings.ignoreUndefinedProperties),\n    });\n\n    return this;\n  }\n\n  delete(documentRef) {\n    if (!(documentRef instanceof FirestoreDocumentReference)) {\n      throw new Error(\n        \"firebase.firestore().runTransaction() Transaction.delete(*) 'documentRef' expected a DocumentReference.\",\n      );\n    }\n\n    this._commandBuffer.push({\n      type: 'DELETE',\n      path: documentRef.path,\n    });\n\n    return this;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}